<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>BlazorTutorial</title>
    <base href="/" />
    <link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />
    <link href="css/app.css" rel="stylesheet" />
    <link href="css/flag-icon.css" rel="stylesheet" />
    <link href="BlazorTutorial.styles.css" rel="stylesheet" />
    <link href="manifest.json" rel="manifest" />
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png" />
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <!--Hard reload on version change-->
    <script>
        function CheckVersionForReload() {
            var version = localStorage["blazor-tutorial-version"];

            var versionFromSite = "";

            $.ajax({
                url: '/assets/version.txt',
                method: 'GET',
                success: function (data) {
                    // Set compare and set value
                    versionFromSite = data;

                    // Check vor version change
                    if (version === undefined || version === null || version === "" || version !== versionFromSite) {

                        // Set saved version
                        localStorage["blazor-tutorial-version"] = versionFromSite;

                        // Hard reload
                        location.reload(true);
                    }
                },
                fail: function () {
                    // Hard reload
                    location.reload(true);
                }
            });
        }

        CheckVersionForReload();
    </script>
</head>

<body>
    <div id="app">Loading...</div>

    <div id="blazor-error-ui">
        An unhandled error has occurred.
        <a href="" class="reload">Reload</a>
        <a class="dismiss">ðŸ—™</a>
    </div>
    <script src="_content/Microsoft.Authentication.WebAssembly.Msal/AuthenticationService.js"></script>
    <script src="_framework/blazor.webassembly.js"></script>
    <script>navigator.serviceWorker.register('service-worker.js');</script>


    <script>
        window.blazorCulture = {
            get: () => localStorage['BlazorCulture'],
            set: (value) => localStorage['BlazorCulture'] = value
        };
    </script>
</body>

</html>
